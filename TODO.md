# Ideas and To-Do

- [x] Refactor Solver to output vector of heads/flows instead of in-place assignment (allow parallization of solve loop)
- [x] Parallelize sequential solves with Rayon if possible (no tanks)
- [x] Refactor network build from inp file, split logic into separate methods
- [x] Refactor network, link and node setup, split into separate files and compute coefficients using traits
- [x] Implement Darcy Weisbach
- [x] Input file support for PATTERN, TIMES, OPTIONS
- [x] Support for PATTERNS in solve loop 
- [x] Implement unit conversion
- [x] Implement pumps
- [x] Single point curves
- [x] Three point curves
- [x] Custom curves
- [x] Use serde for serializing to/from json and msgpack files
- [x] Implement FCV, TCV, FCV, PBV
- [x] Implement PRV and PSV valves
- [x] Coeff stability checks (pipe, valve, pump) (RQTol)
- [x] FCV with Curve
- [x] Implement GPV
- [x] Implement tank logic
- [x] Fixed power pumps
- [ ] Implement CONTROLS
- [ ] Implement RULES
- [ ] Refactor how time steps are calculated to match EPANET
- [ ] Tanks with volume curve
- [ ] Unit conversion for GPV head curves
- [ ] Fix Unit conversion when serializing using Serde
- [ ] Introduce more robust unit type system to handle conversions between different units and systems
- [ ] Network validation (connectivity, presence of tanks)
- [ ] Setup unit and integration testing, improve coverage
- [ ] Get rid of all the Panics and Unwraps, use Result instead
- [ ] Try to get the solver working for f32 in addition to f64 (SIMD speedup?)
- [ ] Setup automated benchmarks
- [ ] Pressure Driven Analysis
- [ ] Create EPANET2_3 API compatibility layer
